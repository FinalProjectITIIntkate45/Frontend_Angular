<div class="recycler-dashboard bg-sand">
  <!-- Header Section -->
  <div class="dashboard-header bg-industrial text-brass">
    <div class="welcome-section">
      <h1 class="welcome-title">Welcome back, <span class="text-rust">{{ username || userName }}</span>!</h1>
      <p class="welcome-subtitle">Here's what's happening with your recycling activities</p>
      <div class="user-info mt-3">
        <span class="user-badge role">Role: <b>{{ role }}</b></span>
        <span class="user-badge name">Name: <b>{{ username }}</b></span>
        <span class="user-badge email">Email: <b>{{ email }}</b></span>
      </div>
      <button class="btn btn-rust mt-4" (click)="navigateToAuctionsList()">
        <i class="fas fa-gavel me-2"></i> Go to Auction List
      </button>
    </div>
    <div class="location-info">
      <i class="fas fa-map-marker-alt text-brass"></i>
      <span>{{ userLocation }}</span>
      <button class="btn btn-outline-danger ms-3" (click)="logout()">
        <i class="fas fa-sign-out-alt me-1"></i> Logout
      </button>
    </div>
  </div>

  <!-- Loading State -->
  <div *ngIf="isLoading" class="loading-container bg-sand">
    <div class="spinner-border text-industrial" role="status">
      <span class="visually-hidden">Loading...</span>
    </div>
    <p class="mt-2 text-industrial">Loading dashboard data...</p>
  </div>

  <!-- Error State -->
  <div *ngIf="errorMessage" class="alert alert-danger" role="alert">
    <i class="fas fa-exclamation-triangle me-2"></i>
    {{ errorMessage }}
  </div>

  <!-- Dashboard Content -->
  <div *ngIf="!isLoading && !errorMessage" class="dashboard-content">
    <!-- Statistics Cards -->
    <div class="row mb-4">
      <div class="col-md-3 col-sm-6 mb-3">
        <div class="stat-card total-auctions">
          <div class="stat-icon bg-industrial">
            <i class="fas fa-gavel"></i>
          </div>
          <div class="stat-content">
            <h3 class="stat-number">{{ totalAuctions }}</h3>
            <p class="stat-label">Total Auctions</p>
          </div>
        </div>
      </div>
      <div class="col-md-3 col-sm-6 mb-3">
        <div class="stat-card active-auctions">
          <div class="stat-icon bg-rust">
            <i class="fas fa-play-circle"></i>
          </div>
          <div class="stat-content">
            <h3 class="stat-number">{{ activeAuctions }}</h3>
            <p class="stat-label">Active Auctions</p>
          </div>
        </div>
      </div>
      <div class="col-md-3 col-sm-6 mb-3">
        <div class="stat-card joined-auctions">
          <div class="stat-icon bg-warmgray text-charcoal">
            <i class="fas fa-handshake"></i>
          </div>
          <div class="stat-content">
            <h3 class="stat-number">{{ joinedAuctions }}</h3>
            <p class="stat-label">Joined Auctions</p>
          </div>
        </div>
      </div>
      <div class="col-md-3 col-sm-6 mb-3">
        <div class="stat-card completed-auctions">
          <div class="stat-icon bg-brass text-charcoal">
            <i class="fas fa-check-circle"></i>
          </div>
          <div class="stat-content">
            <h3 class="stat-number">{{ completedAuctions }}</h3>
            <p class="stat-label">Completed</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Action Button -->
    <div class="row mb-4">
      <div class="col-12">
        <div class="action-section bg-sand">
          <div class="action-buttons">
            <button class="btn btn-industrial btn-lg action-button me-3" (click)="navigateToAuctionsList()">
              <i class="fas fa-list me-2"></i>
              View All Auctions
            </button>
            <button class="btn btn-rust btn-lg action-button" (click)="toggleWalletDisplay()">
              <i class="fas fa-wallet me-2"></i>
              {{ showWallet ? 'Hide Wallet' : 'Show Wallet' }}
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Wallet Display Section -->
    <div *ngIf="showWallet" class="row mb-4">
      <div class="col-12">
        <div class="wallet-section bg-sand">
          <div class="section-header">
            <h2 class="section-title text-industrial">
              <i class="fas fa-wallet me-2 text-brass"></i>
              My Wallet
            </h2>
            <p class="section-subtitle text-warmgray">Your current balance and transaction history</p>
          </div>
          <app-wallet-display></app-wallet-display>
        </div>
      </div>
    </div>

    <!-- Recent Auctions Section -->
    <div class="row">
      <div class="col-12">
        <div class="recent-auctions-section bg-sand">
          <div class="section-header">
            <h2 class="section-title text-industrial">
              <i class="fas fa-clock me-2 text-brass"></i>
              Recent Auctions
            </h2>
            <p class="section-subtitle text-warmgray">Latest auction opportunities in your area</p>
          </div>

          <div *ngIf="recentAuctions.length === 0" class="no-auctions">
            <div class="empty-state">
              <i class="fas fa-inbox fa-3x text-warmgray mb-3"></i>
              <h4>No auctions available</h4>
              <p class="text-warmgray">Check back later for new auction opportunities</p>
            </div>
          </div>

          <div *ngIf="recentAuctions.length > 0" class="auctions-grid">
            <div *ngFor="let auction of recentAuctions; trackBy: trackByAuctionId" class="auction-card bg-warmgray border-industrial" (click)="navigateToAuctionDetails(auction.Id)">
              <div class="auction-header">
                <h5 class="auction-title text-industrial">{{ auction.Matrialname || 'Untitled Auction' }}</h5>
                <span [class]="getStatusBadgeClass(auction.Status)">
                  {{ getStatusText(auction.Status) }}
                </span>
              </div>
              <div class="auction-details">
                <div class="detail-row">
                  <span class="detail-label">Material:</span>
                  <span class="detail-value">{{ auction.Matrialname }}</span>
                </div>
                <div class="detail-row">
                  <span class="detail-label">Location:</span>
                  <span class="detail-value">{{ auction.GovernorateName }}</span>
                </div>
                <div class="detail-row">
                  <span class="detail-label">Start Date:</span>
                  <span class="detail-value">{{ formatDate(auction.StartTime) }}</span>
                </div>
                <div class="detail-row">
                  <span class="detail-label">End Date:</span>
                  <span class="detail-value">{{ formatDate(auction.EndTime) }}</span>
                </div>
                <div class="detail-row">
                  <span class="detail-label">Time Left:</span>
                  <span class="detail-value time-remaining">{{ getTimeRemaining(auction.EndTime) }}</span>
                </div>
              </div>
              <div class="auction-footer">
                <small class="text-warmgray">
                  <i class="fas fa-calendar me-1"></i>
                  Created: {{ formatDate(auction.CreatedAt) }}
                </small>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div> 