<!-- active-auctions.component.html -->
<app-RecyclerLayout (sectionChange)="onSectionChange($event)">
  <div class="active-auctions-content">
    <!-- Statistics Card -->
    <div class="stats-card content-card">
      <div class="card-header">
        <h3><i class="fas fa-chart-bar"></i> إحصائيات المزادات النشطة</h3>
      </div>
      <div class="card-body">
        <div class="stats-grid">
          <div class="stat-item">
            <div class="stat-icon">
              <i class="fas fa-gavel"></i>
            </div>
            <div class="stat-content">
              <div class="stat-value">{{ activeAuctions.length }}</div>
              <div class="stat-label">إجمالي المزادات النشطة</div>
            </div>
          </div>
          <div class="stat-item">
            <div class="stat-icon">
              <i class="fas fa-filter"></i>
            </div>
            <div class="stat-content">
              <div class="stat-value">{{ filteredAuctions.length }}</div>
              <div class="stat-label">المزادات المفلترة</div>
            </div>
          </div>
          <div class="stat-item">
            <div class="stat-icon">
              <i class="fas fa-clock"></i>
            </div>
            <div class="stat-content">
              <div class="stat-value">{{ activeAuctions.length > 0 ? 'نشط' : 'لا يوجد' }}</div>
              <div class="stat-label">حالة المزادات</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Loading State -->
    <div *ngIf="isLoading" class="loading-state content-card">
      <div class="loading-spinner">
        <i class="fas fa-spinner fa-spin"></i>
        <p>جاري تحميل المزادات...</p>
      </div>
    </div>

    <!-- Active Auctions Grid -->
    <div class="auctions-grid" *ngIf="!isLoading && filteredAuctions.length > 0">
      <div *ngFor="let auction of filteredAuctions" class="auction-card content-card">
        <div class="card-header">
          <div class="auction-header">
            <h3 class="auction-title">{{ auction.matrialname }}</h3>
            <span class="auction-status" [class]="getAuctionStatusClass(auction.auctionStatus)">
              {{ auction.auctionStatus }}
            </span>
          </div>
        </div>
        
        <div class="card-body">
          <div class="auction-details">
            <div class="detail-item">
              <i class="fas fa-map-marker-alt"></i>
              <span>{{ auction.governorateName }}</span>
            </div>
            
            <div class="detail-item">
              <i class="fas fa-calendar-alt"></i>
              <span>يبدأ: {{ formatDate(auction.startTime) }}</span>
            </div>
            
            <div class="detail-item">
              <i class="fas fa-clock"></i>
              <span>ينتهي: {{ formatDate(auction.endTime) }}</span>
            </div>
            
            <div class="detail-item">
              <i class="fas fa-money-bill-wave"></i>
              <span>مبلغ التأمين: {{ auction.insuranceAmount | currency:'EGP':'symbol':'1.2-2' }}</span>
            </div>
          </div>
          
          <div class="auction-actions">
            <button class="view-details-btn" (click)="viewAuctionDetails(auction.id)">
              <i class="fas fa-eye"></i>
              عرض التفاصيل
            </button>
            <button class="join-room-btn" 
                      (click)="joinAuctionRoom(auction.id)">
                <i class="fas fa-sign-in-alt"></i>
                دخول غرفة المزاد
              </button>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Empty State -->
    <div *ngIf="!isLoading && filteredAuctions.length === 0 && !errorMessage" class="empty-state content-card">
      <div class="empty-content">
        <i class="fas fa-search"></i>
        <h3>لا توجد مزادات نشطة</h3>
        <p>لا توجد مزادات نشطة حالياً. تحقق مرة أخرى لاحقاً للحصول على مزادات جديدة.</p>
        <button class="refresh-btn" (click)="refreshAuctions()">
          <i class="fas fa-sync-alt"></i>
          تحديث الصفحة
        </button>
      </div>
    </div>
  </div>
</app-RecyclerLayout> 